{% extends "base.html" %}
{% block title %}Permissions{% endblock %}
{% block content %}
    <div class="category-title-container">
        <a href="{{ url_for('category_page', category=category.name) }}"><h1>{{ category.name }}</h1></a>
    </div>
    <h2>Permissions</h2>
    <h4>Add user</h4>
    <form class="approve-user-form" action="{{ url_for('edit_permissions', category=category.name) }}" method="post">
        <label for="username">Username:</label>
        <br>
        <select id="username" name="user_id">
            {% for user in unapproved_users %}
                <option value="{{ user.id }}">{{ user.username }}</option>

            {% endfor %}
        </select>
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}"/>
        <br>
        <input class="btn" type="submit" value="Add"/>
    </form>
    <h4>Approved users</h4>
    <ul class="approved-users-list">
        {% for user in approved_users %}
            <li class="approved-user">
                <span>{{ user.username }}</span>
                <form action="{{ url_for('edit_permissions', category=category.name) }}" method="POST">
                    <input type="hidden" name="user_id" value="{{ user.id }}"/>
                    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}"/>
                    <button type="submit" class="btn btn-remove-access">Remove</button>
                </form>
            </li>
        {% endfor %}
    </ul>


{% endblock %}
